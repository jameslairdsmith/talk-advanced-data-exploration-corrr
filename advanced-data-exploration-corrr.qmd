---
format:
  revealjs: 
    slide-number: true
    css: styles.css
    slide-level: 2
    mouse-wheel: true
    execute:
      echo: true
      warning: false
    output-file: index.html
---
## Advanced data exploration with corrr {style="margin-top: 2.9em;"}

> James Laird-Smith

```{r}
#| include: false
old.hooks <- fansi::set_knit_hooks(knitr::knit_hooks)
options(crayon.enabled=TRUE)
```

Link to slides: data-exploration-corrr.jameslairdsmith.com/

```{r}
library(corrr)
library(magrittr)
```

---

## Agenda

- Old and busted: `stats::cor()`
- New hotness: `corrr::correlate()`
- More general hotness: `corrr::colpair_map()`
- Experiments: `ppcalc::`

---

In the beginning ... there was `stats::cor()`

```{r}
cor(mtcars[1:4])
```

---

But `stats::cor()` returns a matrix, which isn't as easy to work with.

---

## Using `corrr::correlate()` {auto-animate="true"}

```{r}
correlate(mtcars[1:4]) 
```

---

## Using `corrr::correlate()` {auto-animate="true"}


```{r}
correlate(mtcars[1:4]) %>%
  network_plot()
```

---

## Using `corrr::correlate()` {auto-animate="true"}

```{r}
correlate(mtcars[1:4]) %>% 
  shave()
```



---

## Using `corrr::correlate()` {auto-animate="true"}


```{r}
correlate(mtcars[1:4]) %>% 
  shave() %>%
  stretch(na.rm = T)
```

---


But this is still limited.

- Trivially, it only works with correlations.
  - This means it's confined to only numeric-numeric comparisons.
  - Even for numeric-numeric pairs, correlations can only detect linear relationships.
  - Correlations aren't the only useful measure of association.
  
---

## Enter: `corrr::colpair_map()`

- A function I contributed to corrr.
- Just like `corrr::correlate()`, it takes data as the first argument and then an arbitrary function (`.f`) as the second argument.

```{r}
#| eval: false
colpair_map(.data, .f, ..., .diagonal = NA)
```

- The name is a combination of `colpair`, meaning column pairs and `map`, which is like "apply".

- Now you can run any function you like.

---

To get a covariance matrix:

```{r}
colpair_map(mtcars[1:4], stats::cov)
```

